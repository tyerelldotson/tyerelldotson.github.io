```{r, include=FALSE}
library(tidycensus)
library(tigris)
library(sf)
library(dplyr)
library(ggplot2)
library(readr)
options(tigris_use_cache = TRUE)
```

```{r, include=FALSE}
library(tidycensus); library(tigris); library(sf); library(dplyr); library(ggplot2); library(readr)
options(tigris_use_cache = TRUE)                 # saves shapes locally after first download
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
```

---
title: "Assignment 3"
---

# Mapping Census Data

For this assignment, I used the tidycensus package to pull 2023 ACS 5-year data at the county level in Texas. The goal was to create one map and one table that highlight different socioeconomic variables, followed by a brief interpretation of the results. I chose to examine the relationship between home value and commute time. My hypothesis was that those that commute less than 10 minutes will have a positive relationship with home values between \$500-\$749k.

```{r, cache=TRUE}
vars <- c(
  mort_500_749 = "B25096_009",
  mort_total   = "B25096_001",
  drive_u10    = "B08534_022",
  drive_total  = "B08534_001")

tx <- get_acs(
  geography = "county",
  state = "TX",
  variables = vars,
  year = 2023,
  survey = "acs5",
  geometry = TRUE)

tx_wide <- tx |>
  select(GEOID, NAME, variable, estimate, moe, geometry) |>
  tidyr::pivot_wider(names_from = variable, values_from = c(estimate, moe)) |>
  mutate(
    pct_mort_500_749 = ifelse(estimate_mort_total > 0,
                              100 * estimate_mort_500_749 / estimate_mort_total, NA_real_),
    pct_drive_u10    = ifelse(estimate_drive_total > 0,
                              100 * estimate_drive_u10    / estimate_drive_total, NA_real_))

```

```{r}
ggplot(tx_wide) +
  geom_sf(aes(fill = pct_mort_500_749), color = "white", linewidth = 0.2) +
  labs(
    title = "Texas Counties — % of Owner-Occupied Homes Valued $500k–$749,999",
    fill  = "% of owner-occupied",
    caption = "ACS 2019–2023, 5-year estimates") +
  theme_minimal()
```

```{r}
drive_tbl <- tx_wide |>
  sf::st_drop_geometry() |>
  transmute(
    county = sub(", Texas", "", NAME),
    estimate_drive_u10,
    moe_drive_u10,
    total_workers = estimate_drive_total,
    pct_drive_u10 = round(pct_drive_u10, 1)
  ) |>
  filter(!is.na(pct_drive_u10), total_workers > 0) |>   # drop NA or zero
  arrange(desc(pct_drive_u10))

head(drive_tbl, 10)    # top 10
tail(drive_tbl, 10)    # bottom 10
```

## Interpretation

The map shows the share of owner-occupied homes in Texas valued between \$500,000 and \$749,999. The lighter shades represent counties where this price range makes up a higher percentage of the housing stock. Notably, the San Antonio–Austin corridor (e.g., Bexar, Comal, Travis, Williamson) stands out more than Houston, indicating these counties have a relatively larger proportion of homes in this band.

The table complements the map by listing the counties with the highest and lowest proportions of short commute times (less than 10 minutes). Some counties have missing values because the sample sizes for those estimates were too small, but the table still highlights where short commutes are most and least common.

When comparing these patterns, we can see that many of the counties with a higher share of \$500k–\$749k homes overlap with regions that are also among the wealthier parts of Texas. However, the idea of wealthiest counties depends on how wealth is defined, either by median income, total income, property values or a combination of all variables. For example, Harris County (Houston) is economically powerful overall but doesn’t show a large percentage of homes in this specific range because of its wider distribution of both lower- and higher-priced housing. In contrast, parts of Central Texas have a sharper concentration of homes in this bracket, suggesting affordability and demand align more tightly there.

I selected these two variables because I hypothesized that there would be a positive relationship between commute time and home value, specifically, that the less time someone commutes, the higher their home value would be. The data pulled fails to reject this hypothesis.
